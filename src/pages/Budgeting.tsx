import React, { useState } from "react";
import { useNavigate } from "react-router-dom";
import { useAccounts, AccountType } from "@/contexts/AccountContext";
import {
	Settings,
	Car,
	Home,
	ShoppingBasket,
	UtensilsCrossed,
	Film,
	ChevronDown,
	ArrowDown,
	ArrowUp,
	ArrowRightLeft,
	TrendingUp,
	CreditCard,
	Target,
	Bell,
	HelpCircle,
} from "lucide-react";
import { Progress } from "@/components/ui/progress";
import {
	Select,
	SelectContent,
	SelectItem,
	SelectTrigger,
	SelectValue,
} from "@/components/ui/select";
import { ChartContainer, ChartConfig } from "@/components/ui/chart";
import { PieChart, Pie, Cell, Label } from "recharts";
import { BottomNavigation } from "@/components/BottomNavigation";
import { AccountActions } from "@/components/AccountActions";

interface BudgetCategory {
	id: string;
	name: string;
	icon: React.ReactNode;
	date: string;
	spent: number;
	target: number;
	color: string;
}

const budgetCategories: Record<"savings" | "currentAccount", BudgetCategory[]> =
	{
		savings: [
			{
				id: "new-car",
				name: "New car",
				icon: (
					<svg
						xmlns="http://www.w3.org/2000/svg"
						width="24"
						height="24"
						viewBox="0 0 24 24"
						fill="none"
					>
						<path
							d="M22.5 9.75H21.4875L18.8831 3.89062C18.7653 3.62553 18.5731 3.40029 18.3298 3.24222C18.0865 3.08414 17.8026 3 17.5125 3H6.4875C6.19738 3 5.91349 3.08414 5.67022 3.24222C5.42695 3.40029 5.23474 3.62553 5.11688 3.89062L2.5125 9.75H1.5C1.30109 9.75 1.11032 9.82902 0.96967 9.96967C0.829018 10.1103 0.75 10.3011 0.75 10.5C0.75 10.6989 0.829018 10.8897 0.96967 11.0303C1.11032 11.171 1.30109 11.25 1.5 11.25H2.25V18.75C2.25 19.1478 2.40804 19.5294 2.68934 19.8107C2.97064 20.092 3.35218 20.25 3.75 20.25H6C6.39782 20.25 6.77936 20.092 7.06066 19.8107C7.34196 19.5294 7.5 19.1478 7.5 18.75V18H16.5V18.75C16.5 19.1478 16.658 19.5294 16.9393 19.8107C17.2206 20.092 17.6022 20.25 18 20.25H20.25C20.6478 20.25 21.0294 20.092 21.3107 19.8107C21.592 19.5294 21.75 19.1478 21.75 18.75V11.25H22.5C22.6989 11.25 22.8897 11.171 23.0303 11.0303C23.171 10.8897 23.25 10.6989 23.25 10.5C23.25 10.3011 23.171 10.1103 23.0303 9.96967C22.8897 9.82902 22.6989 9.75 22.5 9.75ZM7.5 14.25H5.25C5.05109 14.25 4.86032 14.171 4.71967 14.0303C4.57902 13.8897 4.5 13.6989 4.5 13.5C4.5 13.3011 4.57902 13.1103 4.71967 12.9697C4.86032 12.829 5.05109 12.75 5.25 12.75H7.5C7.69891 12.75 7.88968 12.829 8.03033 12.9697C8.17098 13.1103 8.25 13.3011 8.25 13.5C8.25 13.6989 8.17098 13.8897 8.03033 14.0303C7.88968 14.171 7.69891 14.25 7.5 14.25ZM18.75 14.25H16.5C16.3011 14.25 16.1103 14.171 15.9697 14.0303C15.829 13.8897 15.75 13.6989 15.75 13.5C15.75 13.3011 15.829 13.1103 15.9697 12.9697C16.1103 12.829 16.3011 12.75 16.5 12.75H18.75C18.9489 12.75 19.1397 12.829 19.2803 12.9697C19.421 13.1103 19.5 13.3011 19.5 13.5C19.5 13.6989 19.421 13.8897 19.2803 14.0303C19.1397 14.171 18.9489 14.25 18.75 14.25ZM4.15406 9.75L6.4875 4.5H17.5125L19.8459 9.75H4.15406Z"
							fill="#211E1E"
						/>
					</svg>
				),
				date: "May 2028",
				spent: 6050,
				target: 12000,
				color: "#A488F5",
			},
			{
				id: "home-renovation",
				name: "Home renovation",
				icon: (
					<svg
						xmlns="http://www.w3.org/2000/svg"
						width="24"
						height="24"
						viewBox="0 0 24 24"
						fill="none"
					>
						<path
							d="M1.5 9.375V6.75C1.5 6.35218 1.65804 5.97064 1.93934 5.68934C2.22064 5.40804 2.60218 5.25 3 5.25H10.875C10.9745 5.25 11.0698 5.28951 11.1402 5.35984C11.2105 5.43016 11.25 5.52554 11.25 5.625V12.75H6C6 11.9544 5.68393 11.1913 5.12132 10.6287C4.55871 10.0661 3.79565 9.75 3 9.75H1.875C1.77554 9.75 1.68016 9.71049 1.60984 9.64017C1.53951 9.56984 1.5 9.47446 1.5 9.375ZM21 9.75H22.125C22.2245 9.75 22.3198 9.71049 22.3902 9.64017C22.4605 9.56984 22.5 9.47446 22.5 9.375V6.75C22.5 6.35218 22.342 5.97064 22.0607 5.68934C21.7794 5.40804 21.3978 5.25 21 5.25H13.125C13.0255 5.25 12.9302 5.28951 12.8598 5.35984C12.7895 5.43016 12.75 5.52554 12.75 5.625V12.75H18C18 11.9544 18.3161 11.1913 18.8787 10.6287C19.4413 10.0661 20.2044 9.75 21 9.75ZM21.75 11.25H21C20.6022 11.25 20.2206 11.408 19.9393 11.6893C19.658 11.9706 19.5 12.3522 19.5 12.75V13.5C19.5 13.6989 19.421 13.8897 19.2803 14.0303C19.1397 14.171 18.9489 14.25 18.75 14.25H5.25C5.05109 14.25 4.86032 14.171 4.71967 14.0303C4.57902 13.8897 4.5 13.6989 4.5 13.5V12.75C4.5 12.3522 4.34196 11.9706 4.06066 11.6893C3.77936 11.408 3.39782 11.25 3 11.25H2.25C1.85218 11.25 1.47064 11.408 1.18934 11.6893C0.908035 11.9706 0.75 12.3522 0.75 12.75V15.75C0.75 16.1478 0.908035 16.5294 1.18934 16.8107C1.47064 17.092 1.85218 17.25 2.25 17.25H3V18.7247C2.99714 18.9185 3.06778 19.1062 3.1977 19.25C3.32763 19.3939 3.50721 19.4832 3.70031 19.5C3.8029 19.5068 3.9058 19.4925 4.00261 19.4578C4.09942 19.4232 4.18807 19.369 4.26306 19.2987C4.33806 19.2284 4.39779 19.1434 4.43855 19.049C4.47931 18.9546 4.50023 18.8528 4.5 18.75V17.25H19.5V18.7247C19.4974 18.9182 19.5682 19.1056 19.6981 19.2491C19.828 19.3926 20.0075 19.4816 20.2003 19.4981C20.3029 19.5049 20.4058 19.4906 20.5026 19.456C20.5994 19.4213 20.6881 19.3672 20.7631 19.2968C20.8381 19.2265 20.8978 19.1415 20.9385 19.0471C20.9793 18.9527 21.0002 18.8509 21 18.7481V17.25H21.75C22.1478 17.25 22.5294 17.092 22.8107 16.8107C23.092 16.5294 23.25 16.1478 23.25 15.75V12.75C23.25 12.3522 23.092 11.9706 22.8107 11.6893C22.5294 11.408 22.1478 11.25 21.75 11.25Z"
							fill="black"
						/>
					</svg>
				),
				date: "March 2027",
				spent: 10200,
				target: 25000,
				color: "#C7B6FB",
			},
		],
		currentAccount: [
			{
				id: "groceries",
				name: "Groceries",
				icon: (
					<svg
						xmlns="http://www.w3.org/2000/svg"
						width="24"
						height="24"
						viewBox="0 0 24 24"
						fill="none"
					>
						<path
							d="M22.3125 7.75587C22.2424 7.6757 22.1559 7.61141 22.0589 7.56728C21.9619 7.52315 21.8566 7.50019 21.75 7.49994H17.5904L12.5625 1.75587C12.4922 1.67607 12.4056 1.61215 12.3086 1.56837C12.2116 1.52459 12.1065 1.50195 12 1.50195C11.8936 1.50195 11.7885 1.52459 11.6915 1.56837C11.5945 1.61215 11.5079 1.67607 11.4375 1.75587L6.40974 7.49994H2.25005C2.14316 7.49993 2.03751 7.52277 1.94016 7.56693C1.84282 7.61109 1.75604 7.67554 1.68564 7.75597C1.61525 7.8364 1.56285 7.93095 1.53197 8.03328C1.5011 8.13562 1.49245 8.24337 1.50661 8.34931L2.91943 18.9487C2.96871 19.3084 3.14633 19.6382 3.41955 19.8773C3.69278 20.1164 4.04322 20.2488 4.4063 20.2499H19.5938C19.9569 20.2488 20.3073 20.1164 20.5805 19.8773C20.8538 19.6382 21.0314 19.3084 21.0807 18.9487L22.4935 8.34931C22.5074 8.24321 22.4985 8.13536 22.4673 8.03301C22.436 7.93065 22.3833 7.83616 22.3125 7.75587ZM7.65005 17.2499C7.62476 17.2513 7.59941 17.2513 7.57411 17.2499C7.38754 17.2509 7.20731 17.1822 7.06863 17.0574C6.92995 16.9326 6.84277 16.7606 6.82411 16.5749L6.29911 11.3249C6.27922 11.127 6.33877 10.9293 6.46465 10.7753C6.59054 10.6213 6.77245 10.5236 6.97036 10.5037C7.16828 10.4838 7.36599 10.5433 7.52001 10.6692C7.67402 10.7951 7.77172 10.977 7.79161 11.1749L8.31661 16.4249C8.33762 16.6227 8.27919 16.8208 8.15419 16.9755C8.02918 17.1302 7.84784 17.2289 7.65005 17.2499ZM12.75 16.4999C12.75 16.6988 12.671 16.8896 12.5304 17.0303C12.3897 17.1709 12.199 17.2499 12 17.2499C11.8011 17.2499 11.6104 17.1709 11.4697 17.0303C11.3291 16.8896 11.25 16.6988 11.25 16.4999V11.2499C11.25 11.051 11.3291 10.8603 11.4697 10.7196C11.6104 10.579 11.8011 10.4999 12 10.4999C12.199 10.4999 12.3897 10.579 12.5304 10.7196C12.671 10.8603 12.75 11.051 12.75 11.2499V16.4999ZM8.40286 7.49994L12 3.389L15.5972 7.49994H8.40286ZM17.6963 11.3249L17.1713 16.5749C17.1527 16.7598 17.0662 16.9311 16.9285 17.0558C16.7908 17.1805 16.6118 17.2497 16.426 17.2499C16.4007 17.2513 16.3753 17.2513 16.35 17.2499C16.2521 17.2401 16.157 17.211 16.0702 17.1644C15.9834 17.1178 15.9067 17.0546 15.8443 16.9783C15.782 16.9021 15.7353 16.8143 15.7069 16.72C15.6785 16.6257 15.669 16.5267 15.6788 16.4287L16.2038 11.1787C16.2237 10.9808 16.3214 10.7989 16.4754 10.673C16.6294 10.5471 16.8271 10.4875 17.0251 10.5074C17.223 10.5273 17.4049 10.625 17.5308 10.779C17.6566 10.9331 17.7162 11.1308 17.6963 11.3287V11.3249Z"
							fill="black"
						/>
					</svg>
				),
				date: "This month",
				spent: 250,
				target: 500,
				color: "#E4B33D",
			},
			{
				id: "restaurants",
				name: "Restaurants",
				icon: (
					<svg
						xmlns="http://www.w3.org/2000/svg"
						width="24"
						height="24"
						viewBox="0 0 24 24"
						fill="none"
					>
						<path
							d="M20.25 3.74996V21C20.25 21.1989 20.171 21.3896 20.0303 21.5303C19.8897 21.6709 19.6989 21.75 19.5 21.75C19.3011 21.75 19.1103 21.6709 18.9697 21.5303C18.829 21.3896 18.75 21.1989 18.75 21V16.5H14.25C14.0511 16.5 13.8603 16.4209 13.7197 16.2803C13.579 16.1396 13.5 15.9489 13.5 15.75C13.5348 13.9534 13.7617 12.1657 14.1769 10.4175C15.0938 6.62152 16.8319 4.07715 19.2047 3.0609C19.3187 3.01205 19.4431 2.99225 19.5667 3.00328C19.6903 3.01432 19.8092 3.05584 19.9128 3.12412C20.0164 3.19241 20.1014 3.28532 20.1603 3.39455C20.2191 3.50377 20.2499 3.62589 20.25 3.74996ZM11.2397 3.62715C11.225 3.52867 11.1908 3.4341 11.1392 3.34896C11.0876 3.26381 11.0195 3.1898 10.939 3.13124C10.8585 3.07267 10.7671 3.03073 10.6702 3.00786C10.5733 2.98498 10.4728 2.98163 10.3746 2.998C10.2764 3.01437 10.1824 3.05013 10.0982 3.1032C10.0139 3.15627 9.94107 3.22558 9.88389 3.30709C9.82671 3.38861 9.78634 3.48069 9.76512 3.57797C9.7439 3.67526 9.74227 3.77579 9.76031 3.87371L10.4897 8.24996H8.25V3.74996C8.25 3.55105 8.17098 3.36028 8.03033 3.21963C7.88968 3.07898 7.69891 2.99996 7.5 2.99996C7.30109 2.99996 7.11032 3.07898 6.96967 3.21963C6.82902 3.36028 6.75 3.55105 6.75 3.74996V8.24996H4.51031L5.23969 3.87371C5.25773 3.77579 5.2561 3.67526 5.23488 3.57797C5.21366 3.48069 5.17329 3.38861 5.11611 3.30709C5.05893 3.22558 4.98609 3.15627 4.90184 3.1032C4.81759 3.05013 4.72362 3.01437 4.62541 2.998C4.52719 2.98163 4.4267 2.98498 4.32979 3.00786C4.23289 3.03073 4.14151 3.07267 4.06098 3.13124C3.98045 3.1898 3.9124 3.26381 3.86077 3.34896C3.80915 3.4341 3.775 3.52867 3.76031 3.62715L3.01031 8.12715C3.00358 8.16774 3.00013 8.20881 3 8.24996C3.0015 9.31291 3.37867 10.3411 4.06488 11.1529C4.75108 11.9647 5.70214 12.5078 6.75 12.6862V21C6.75 21.1989 6.82902 21.3896 6.96967 21.5303C7.11032 21.6709 7.30109 21.75 7.5 21.75C7.69891 21.75 7.88968 21.6709 8.03033 21.5303C8.17098 21.3896 8.25 21.1989 8.25 21V12.6862C9.29786 12.5078 10.2489 11.9647 10.9351 11.1529C11.6213 10.3411 11.9985 9.31291 12 8.24996C11.9999 8.20881 11.9964 8.16774 11.9897 8.12715L11.2397 3.62715Z"
							fill="black"
						/>
					</svg>
				),
				date: "This month",
				spent: 125,
				target: 200,
				color: "#ECCA77",
			},
			{
				id: "entertainment",
				name: "Entertainment",
				icon: (
					<svg
						xmlns="http://www.w3.org/2000/svg"
						width="24"
						height="24"
						viewBox="0 0 24 24"
						fill="none"
					>
						<path
							d="M23.1943 16.2891C23.1947 16.2847 23.1947 16.2803 23.1943 16.2759L21.6577 8.385C21.6577 8.37938 21.6577 8.37375 21.6577 8.36813C21.4205 7.07255 20.7368 5.90107 19.7254 5.05735C18.714 4.21364 17.4389 3.75105 16.1218 3.75H7.86147C6.54067 3.74949 5.26198 4.21471 4.2503 5.06384C3.23862 5.91297 2.55873 7.09162 2.33022 8.3925L0.801155 16.2759C0.800703 16.2803 0.800703 16.2847 0.801155 16.2891C0.676695 16.9958 0.780725 17.7238 1.09814 18.3673C1.41556 19.0109 1.92984 19.5365 2.56631 19.8679C3.20279 20.1993 3.92833 20.3193 4.63759 20.2103C5.34685 20.1013 6.00292 19.7691 6.51053 19.2619L6.54334 19.2272L10.2643 15H13.733L17.4558 19.2272C17.4662 19.2394 17.4774 19.2506 17.4887 19.2619C18.1213 19.8932 18.9781 20.2484 19.8718 20.25C20.3644 20.2497 20.851 20.1415 21.2974 19.9331C21.7438 19.7247 22.1391 19.4211 22.4557 19.0436C22.7722 18.6661 23.0023 18.2239 23.1297 17.7481C23.2572 17.2722 23.2789 16.7742 23.1933 16.2891H23.1943ZM9.74678 10.5H8.99678V11.25C8.99678 11.4489 8.91776 11.6397 8.77711 11.7803C8.63646 11.921 8.44569 12 8.24678 12C8.04787 12 7.8571 11.921 7.71645 11.7803C7.5758 11.6397 7.49678 11.4489 7.49678 11.25V10.5H6.74678C6.54787 10.5 6.3571 10.421 6.21645 10.2803C6.0758 10.1397 5.99678 9.94891 5.99678 9.75C5.99678 9.55109 6.0758 9.36032 6.21645 9.21967C6.3571 9.07902 6.54787 9 6.74678 9H7.49678V8.25C7.49678 8.05109 7.5758 7.86032 7.71645 7.71967C7.8571 7.57902 8.04787 7.5 8.24678 7.5C8.44569 7.5 8.63646 7.57902 8.77711 7.71967C8.91776 7.86032 8.99678 8.05109 8.99678 8.25V9H9.74678C9.94569 9 10.1365 9.07902 10.2771 9.21967C10.4178 9.36032 10.4968 9.55109 10.4968 9.75C10.4968 9.94891 10.4178 10.1397 10.2771 10.2803C10.1365 10.421 9.94569 10.5 9.74678 10.5ZM13.4968 9.75C13.4968 9.55109 13.5758 9.36032 13.7164 9.21967C13.8571 9.07902 14.0479 9 14.2468 9H16.4968C16.6957 9 16.8865 9.07902 17.0271 9.21967C17.1678 9.36032 17.2468 9.55109 17.2468 9.75C17.2468 9.94891 17.1678 10.1397 17.0271 10.2803C16.8865 10.421 16.6957 10.5 16.4968 10.5H14.2468C14.0479 10.5 13.8571 10.421 13.7164 10.2803C13.5758 10.1397 13.4968 9.94891 13.4968 9.75ZM21.4065 17.9503C21.266 18.1526 21.0868 18.3249 20.8792 18.4574C20.6716 18.5898 20.4397 18.6797 20.1971 18.7219C19.9036 18.7732 19.6021 18.7542 19.3174 18.6663C19.0327 18.5785 18.7728 18.4243 18.5593 18.2166L15.728 15H16.1218C17.0793 15.0001 18.021 14.7558 18.8577 14.2902C19.6944 13.8246 20.3984 13.1531 20.903 12.3394L21.7224 16.5581C21.7641 16.7995 21.7577 17.0468 21.7035 17.2858C21.6492 17.5247 21.5483 17.7505 21.4065 17.9503Z"
							fill="black"
						/>
					</svg>
				),
				date: "This month",
				spent: 135,
				target: 300,
				color: "#F4E1B1",
			},
		],
	};

function formatCurrency(value: number) {
	return `£${value.toLocaleString("en-GB", {
		minimumFractionDigits: 2,
		maximumFractionDigits: 2,
	})}`;
}

const savingsActions = [
	{
		label: "Trends",
		icon: (
			<svg
				xmlns="http://www.w3.org/2000/svg"
				width="24"
				height="24"
				viewBox="0 0 24 24"
				fill="none"
			>
				<path
					d="M21.75 19.5C21.75 19.6989 21.671 19.8897 21.5303 20.0303C21.3897 20.171 21.1989 20.25 21 20.25H3C2.80109 20.25 2.61032 20.171 2.46967 20.0303C2.32902 19.8897 2.25 19.6989 2.25 19.5C2.25 19.3011 2.32902 19.1103 2.46967 18.9697C2.61032 18.829 2.80109 18.75 3 18.75H3.75V12.75C3.75 12.5511 3.82902 12.3603 3.96967 12.2197C4.11032 12.079 4.30109 12 4.5 12H6.75C6.94891 12 7.13968 12.079 7.28033 12.2197C7.42098 12.3603 7.5 12.5511 7.5 12.75V18.75H9V8.25C9 8.05109 9.07902 7.86032 9.21967 7.71967C9.36032 7.57902 9.55109 7.5 9.75 7.5H12.75C12.9489 7.5 13.1397 7.57902 13.2803 7.71967C13.421 7.86032 13.5 8.05109 13.5 8.25V18.75H15V3.75C15 3.55109 15.079 3.36032 15.2197 3.21967C15.3603 3.07902 15.5511 3 15.75 3H19.5C19.6989 3 19.8897 3.07902 20.0303 3.21967C20.171 3.36032 20.25 3.55109 20.25 3.75V18.75H21C21.1989 18.75 21.3897 18.829 21.5303 18.9697C21.671 19.1103 21.75 19.3011 21.75 19.5Z"
					fill="#A488F5"
				/>
			</svg>
		),
	},
	{
		label: "Spending",
		icon: (
			<svg
				xmlns="http://www.w3.org/2000/svg"
				width="24"
				height="24"
				viewBox="0 0 24 24"
				fill="none"
			>
				<path
					d="M22.4999 5.25V11.25C22.5 11.3984 22.4561 11.5435 22.3737 11.667C22.2913 11.7904 22.1741 11.8867 22.037 11.9435C21.8999 12.0003 21.749 12.0151 21.6034 11.9861C21.4579 11.9572 21.3242 11.8856 21.2193 11.7806L18.7499 9.31031L13.2806 14.7806C13.2109 14.8504 13.1282 14.9057 13.0371 14.9434C12.9461 14.9812 12.8485 15.0006 12.7499 15.0006C12.6514 15.0006 12.5538 14.9812 12.4627 14.9434C12.3717 14.9057 12.289 14.8504 12.2193 14.7806L8.99993 11.5603L2.78055 17.7806C2.63982 17.9214 2.44895 18.0004 2.24993 18.0004C2.05091 18.0004 1.86003 17.9214 1.7193 17.7806C1.57857 17.6399 1.49951 17.449 1.49951 17.25C1.49951 17.051 1.57857 16.8601 1.7193 16.7194L8.4693 9.96938C8.53896 9.89964 8.62168 9.84432 8.71272 9.80658C8.80377 9.76884 8.90137 9.74941 8.99993 9.74941C9.09849 9.74941 9.19609 9.76884 9.28713 9.80658C9.37818 9.84432 9.4609 9.89964 9.53055 9.96938L12.7499 13.1897L17.6896 8.25L15.2193 5.78063C15.1143 5.67573 15.0428 5.54204 15.0138 5.39648C14.9848 5.25092 14.9996 5.10002 15.0565 4.96291C15.1133 4.82579 15.2095 4.70861 15.3329 4.62621C15.4564 4.54381 15.6015 4.49988 15.7499 4.5H21.7499C21.9488 4.5 22.1396 4.57902 22.2803 4.71967C22.4209 4.86032 22.4999 5.05109 22.4999 5.25Z"
					fill="#A488F5"
				/>
			</svg>
		),
	},
	{
		label: "Goals",
		icon: (
			<svg
				xmlns="http://www.w3.org/2000/svg"
				width="24"
				height="24"
				viewBox="0 0 24 24"
				fill="none"
			>
				<path
					d="M20.8004 7.79614C21.8412 9.97282 22.0387 12.4579 21.355 14.7717C20.6713 17.0855 19.1547 19.064 17.098 20.3253C15.0413 21.5867 12.5902 22.0416 10.2179 21.602C7.84557 21.1625 5.72013 19.8598 4.25179 17.9454C2.78344 16.0309 2.0763 13.6405 2.26682 11.2353C2.45735 8.83012 3.53204 6.58078 5.28348 4.92139C7.03492 3.26199 9.33895 2.31018 11.7509 2.24966C14.1628 2.18913 16.5117 3.02418 18.3442 4.59363L20.4695 2.46738C20.6102 2.32665 20.8011 2.24759 21.0001 2.24759C21.1991 2.24759 21.39 2.32665 21.5307 2.46738C21.6715 2.60812 21.7505 2.79899 21.7505 2.99801C21.7505 3.19703 21.6715 3.3879 21.5307 3.52863L15.7126 9.3477L12.1773 12.883L9.93198 15.1283C10.5125 15.5123 11.1883 15.7271 11.884 15.7488C12.5796 15.7704 13.2675 15.5981 13.8708 15.251C14.474 14.904 14.9688 14.3959 15.2997 13.7836C15.6306 13.1713 15.7846 12.4791 15.7445 11.7843C15.7333 11.5853 15.8016 11.3901 15.9343 11.2416C16.0671 11.093 16.2534 11.0033 16.4523 10.9921C16.6512 10.9809 16.8464 11.0492 16.995 11.1819C17.1435 11.3147 17.2333 11.501 17.2445 11.6999C17.305 12.7619 17.0414 13.8172 16.4888 14.7261C15.9361 15.635 15.1204 16.3546 14.1497 16.7895C13.1789 17.2245 12.099 17.3543 11.0528 17.1618C10.0067 16.9692 9.04366 16.4635 8.29136 15.7114C7.35571 14.7723 6.81 13.514 6.76379 12.1891C6.71758 10.8642 7.1743 9.57089 8.04224 8.56884C8.91018 7.56678 10.1251 6.93018 11.443 6.78685C12.7609 6.64353 14.0842 7.00409 15.1473 7.79614L17.2782 5.66145C15.7152 4.36376 13.7279 3.68929 11.6979 3.76758C9.66793 3.84587 7.73844 4.67141 6.28003 6.08563C4.82163 7.49986 3.93715 9.40304 3.79646 11.4297C3.65578 13.4563 4.26881 15.4634 5.51782 17.0656C6.76683 18.6678 8.56375 19.752 10.5634 20.11C12.5631 20.468 14.6246 20.0746 16.3519 19.0053C18.0792 17.9361 19.3506 16.2663 19.9218 14.3168C20.493 12.3672 20.3238 10.2754 19.4467 8.44301C19.3609 8.26349 19.3499 8.05725 19.4162 7.86965C19.4825 7.68206 19.6206 7.52848 19.8001 7.4427C19.9796 7.35692 20.1859 7.34596 20.3735 7.41224C20.5611 7.47853 20.7146 7.61662 20.8004 7.79614Z"
					fill="#A488F5"
				/>
			</svg>
		),
	},
	{
		label: "Notifications",
		icon: (
			<svg
				xmlns="http://www.w3.org/2000/svg"
				width="24"
				height="24"
				viewBox="0 0 24 24"
				fill="none"
			>
				<path
					d="M15.7499 21C15.7499 21.1989 15.6709 21.3897 15.5302 21.5303C15.3896 21.671 15.1988 21.75 14.9999 21.75H8.99989C8.80098 21.75 8.61021 21.671 8.46956 21.5303C8.32891 21.3897 8.24989 21.1989 8.24989 21C8.24989 20.8011 8.32891 20.6103 8.46956 20.4697C8.61021 20.329 8.80098 20.25 8.99989 20.25H14.9999C15.1988 20.25 15.3896 20.329 15.5302 20.4697C15.6709 20.6103 15.7499 20.8011 15.7499 21ZM20.7946 16.4944C20.2733 15.5981 19.4999 13.0622 19.4999 9.75C19.4999 7.76088 18.7097 5.85322 17.3032 4.4467C15.8967 3.04018 13.989 2.25 11.9999 2.25C10.0108 2.25 8.10311 3.04018 6.69659 4.4467C5.29007 5.85322 4.49989 7.76088 4.49989 9.75C4.49989 13.0631 3.72551 15.5981 3.2052 16.4944C3.07233 16.7222 3.00189 16.9811 3.00099 17.2449C3.00008 17.5086 3.06874 17.768 3.20005 17.9967C3.33135 18.2255 3.52065 18.4156 3.74886 18.5478C3.97708 18.6801 4.23613 18.7498 4.49989 18.75H19.4999C19.7636 18.7496 20.0225 18.6798 20.2506 18.5475C20.4787 18.4151 20.6678 18.225 20.799 17.9963C20.9302 17.7676 20.9988 17.5083 20.9979 17.2446C20.9969 16.9809 20.9265 16.7222 20.7936 16.4944H20.7946Z"
					fill="#A488F5"
				/>
			</svg>
		),
	},
	{
		label: "Help",
		icon: (
			<svg
				xmlns="http://www.w3.org/2000/svg"
				width="24"
				height="24"
				viewBox="0 0 24 24"
				fill="none"
			>
				<path
					d="M12 2.25C10.0716 2.25 8.18657 2.82183 6.58319 3.89317C4.97982 4.96452 3.73013 6.48726 2.99218 8.26884C2.25422 10.0504 2.06114 12.0108 2.43735 13.9021C2.81355 15.7934 3.74215 17.5307 5.10571 18.8943C6.46928 20.2579 8.20656 21.1865 10.0979 21.5627C11.9892 21.9389 13.9496 21.7458 15.7312 21.0078C17.5127 20.2699 19.0355 19.0202 20.1068 17.4168C21.1782 15.8134 21.75 13.9284 21.75 12C21.7473 9.41498 20.7192 6.93661 18.8913 5.10872C17.0634 3.28084 14.585 2.25273 12 2.25ZM12 18C11.7775 18 11.56 17.934 11.375 17.8104C11.19 17.6868 11.0458 17.5111 10.9606 17.3055C10.8755 17.1 10.8532 16.8738 10.8966 16.6555C10.94 16.4373 11.0472 16.2368 11.2045 16.0795C11.3618 15.9222 11.5623 15.815 11.7805 15.7716C11.9988 15.7282 12.225 15.7505 12.4305 15.8356C12.6361 15.9208 12.8118 16.065 12.9354 16.25C13.059 16.435 13.125 16.6525 13.125 16.875C13.125 17.1734 13.0065 17.4595 12.7955 17.6705C12.5845 17.8815 12.2984 18 12 18ZM12.75 13.4325V13.5C12.75 13.6989 12.671 13.8897 12.5303 14.0303C12.3897 14.171 12.1989 14.25 12 14.25C11.8011 14.25 11.6103 14.171 11.4697 14.0303C11.329 13.8897 11.25 13.6989 11.25 13.5V12.75C11.25 12.5511 11.329 12.3603 11.4697 12.2197C11.6103 12.079 11.8011 12 12 12C13.2403 12 14.25 11.1562 14.25 10.125C14.25 9.09375 13.2403 8.25 12 8.25C10.7597 8.25 9.75 9.09375 9.75 10.125V10.5C9.75 10.6989 9.67099 10.8897 9.53033 11.0303C9.38968 11.171 9.19892 11.25 9 11.25C8.80109 11.25 8.61033 11.171 8.46967 11.0303C8.32902 10.8897 8.25 10.6989 8.25 10.5V10.125C8.25 8.26406 9.93188 6.75 12 6.75C14.0681 6.75 15.75 8.26406 15.75 10.125C15.75 11.7544 14.46 13.1184 12.75 13.4325Z"
					fill="#A488F5"
				/>
			</svg>
		),
	},
];

const currentAccountActions = [
	{
		label: "Trends",
		icon: (
			<svg
				xmlns="http://www.w3.org/2000/svg"
				width="24"
				height="24"
				viewBox="0 0 24 24"
				fill="none"
			>
				<path
					d="M21.75 19.5C21.75 19.6989 21.671 19.8897 21.5303 20.0303C21.3897 20.171 21.1989 20.25 21 20.25H3C2.80109 20.25 2.61032 20.171 2.46967 20.0303C2.32902 19.8897 2.25 19.6989 2.25 19.5C2.25 19.3011 2.32902 19.1103 2.46967 18.9697C2.61032 18.829 2.80109 18.75 3 18.75H3.75V12.75C3.75 12.5511 3.82902 12.3603 3.96967 12.2197C4.11032 12.079 4.30109 12 4.5 12H6.75C6.94891 12 7.13968 12.079 7.28033 12.2197C7.42098 12.3603 7.5 12.5511 7.5 12.75V18.75H9V8.25C9 8.05109 9.07902 7.86032 9.21967 7.71967C9.36032 7.57902 9.55109 7.5 9.75 7.5H12.75C12.9489 7.5 13.1397 7.57902 13.2803 7.71967C13.421 7.86032 13.5 8.05109 13.5 8.25V18.75H15V3.75C15 3.55109 15.079 3.36032 15.2197 3.21967C15.3603 3.07902 15.5511 3 15.75 3H19.5C19.6989 3 19.8897 3.07902 20.0303 3.21967C20.171 3.36032 20.25 3.55109 20.25 3.75V18.75H21C21.1989 18.75 21.3897 18.829 21.5303 18.9697C21.671 19.1103 21.75 19.3011 21.75 19.5Z"
					fill="#E4B33D"
				/>
			</svg>
		),
	},
	{
		label: "Spending",
		icon: (
			<svg
				xmlns="http://www.w3.org/2000/svg"
				width="24"
				height="24"
				viewBox="0 0 24 24"
				fill="none"
			>
				<path
					d="M22.4999 5.25V11.25C22.5 11.3984 22.4561 11.5435 22.3737 11.667C22.2913 11.7904 22.1741 11.8867 22.037 11.9435C21.8999 12.0003 21.749 12.0151 21.6034 11.9861C21.4579 11.9572 21.3242 11.8856 21.2193 11.7806L18.7499 9.31031L13.2806 14.7806C13.2109 14.8504 13.1282 14.9057 13.0371 14.9434C12.9461 14.9812 12.8485 15.0006 12.7499 15.0006C12.6514 15.0006 12.5538 14.9812 12.4627 14.9434C12.3717 14.9057 12.289 14.8504 12.2193 14.7806L8.99993 11.5603L2.78055 17.7806C2.63982 17.9214 2.44895 18.0004 2.24993 18.0004C2.05091 18.0004 1.86003 17.9214 1.7193 17.7806C1.57857 17.6399 1.49951 17.449 1.49951 17.25C1.49951 17.051 1.57857 16.8601 1.7193 16.7194L8.4693 9.96938C8.53896 9.89964 8.62168 9.84432 8.71272 9.80658C8.80377 9.76884 8.90137 9.74941 8.99993 9.74941C9.09849 9.74941 9.19609 9.76884 9.28713 9.80658C9.37818 9.84432 9.4609 9.89964 9.53055 9.96938L12.7499 13.1897L17.6896 8.25L15.2193 5.78063C15.1143 5.67573 15.0428 5.54204 15.0138 5.39648C14.9848 5.25092 14.9996 5.10002 15.0565 4.96291C15.1133 4.82579 15.2095 4.70861 15.3329 4.62621C15.4564 4.54381 15.6015 4.49988 15.7499 4.5H21.7499C21.9488 4.5 22.1396 4.57902 22.2803 4.71967C22.4209 4.86032 22.4999 5.05109 22.4999 5.25Z"
					fill="#E4B33D"
				/>
			</svg>
		),
	},
	{
		label: "Goals",
		icon: (
			<svg
				xmlns="http://www.w3.org/2000/svg"
				width="24"
				height="24"
				viewBox="0 0 24 24"
				fill="none"
			>
				<path
					d="M20.8004 7.79614C21.8412 9.97282 22.0387 12.4579 21.355 14.7717C20.6713 17.0855 19.1547 19.064 17.098 20.3253C15.0413 21.5867 12.5902 22.0416 10.2179 21.602C7.84557 21.1625 5.72013 19.8598 4.25179 17.9454C2.78344 16.0309 2.0763 13.6405 2.26682 11.2353C2.45735 8.83012 3.53204 6.58078 5.28348 4.92139C7.03492 3.26199 9.33895 2.31018 11.7509 2.24966C14.1628 2.18913 16.5117 3.02418 18.3442 4.59363L20.4695 2.46738C20.6102 2.32665 20.8011 2.24759 21.0001 2.24759C21.1991 2.24759 21.39 2.32665 21.5307 2.46738C21.6715 2.60812 21.7505 2.79899 21.7505 2.99801C21.7505 3.19703 21.6715 3.3879 21.5307 3.52863L15.7126 9.3477L12.1773 12.883L9.93198 15.1283C10.5125 15.5123 11.1883 15.7271 11.884 15.7488C12.5796 15.7704 13.2675 15.5981 13.8708 15.251C14.474 14.904 14.9688 14.3959 15.2997 13.7836C15.6306 13.1713 15.7846 12.4791 15.7445 11.7843C15.7333 11.5853 15.8016 11.3901 15.9343 11.2416C16.0671 11.093 16.2534 11.0033 16.4523 10.9921C16.6512 10.9809 16.8464 11.0492 16.995 11.1819C17.1435 11.3147 17.2333 11.501 17.2445 11.6999C17.305 12.7619 17.0414 13.8172 16.4888 14.7261C15.9361 15.635 15.1204 16.3546 14.1497 16.7895C13.1789 17.2245 12.099 17.3543 11.0528 17.1618C10.0067 16.9692 9.04366 16.4635 8.29136 15.7114C7.35571 14.7723 6.81 13.514 6.76379 12.1891C6.71758 10.8642 7.1743 9.57089 8.04224 8.56884C8.91018 7.56678 10.1251 6.93018 11.443 6.78685C12.7609 6.64353 14.0842 7.00409 15.1473 7.79614L17.2782 5.66145C15.7152 4.36376 13.7279 3.68929 11.6979 3.76758C9.66793 3.84587 7.73844 4.67141 6.28003 6.08563C4.82163 7.49986 3.93715 9.40304 3.79646 11.4297C3.65578 13.4563 4.26881 15.4634 5.51782 17.0656C6.76683 18.6678 8.56375 19.752 10.5634 20.11C12.5631 20.468 14.6246 20.0746 16.3519 19.0053C18.0792 17.9361 19.3506 16.2663 19.9218 14.3168C20.493 12.3672 20.3238 10.2754 19.4467 8.44301C19.3609 8.26349 19.3499 8.05725 19.4162 7.86965C19.4825 7.68206 19.6206 7.52848 19.8001 7.4427C19.9796 7.35692 20.1859 7.34596 20.3735 7.41224C20.5611 7.47853 20.7146 7.61662 20.8004 7.79614Z"
					fill="#E4B33D"
				/>
			</svg>
		),
	},
	{
		label: "Notifications",
		icon: (
			<svg
				xmlns="http://www.w3.org/2000/svg"
				width="24"
				height="24"
				viewBox="0 0 24 24"
				fill="none"
			>
				<path
					d="M15.7499 21C15.7499 21.1989 15.6709 21.3897 15.5302 21.5303C15.3896 21.671 15.1988 21.75 14.9999 21.75H8.99989C8.80098 21.75 8.61021 21.671 8.46956 21.5303C8.32891 21.3897 8.24989 21.1989 8.24989 21C8.24989 20.8011 8.32891 20.6103 8.46956 20.4697C8.61021 20.329 8.80098 20.25 8.99989 20.25H14.9999C15.1988 20.25 15.3896 20.329 15.5302 20.4697C15.6709 20.6103 15.7499 20.8011 15.7499 21ZM20.7946 16.4944C20.2733 15.5981 19.4999 13.0622 19.4999 9.75C19.4999 7.76088 18.7097 5.85322 17.3032 4.4467C15.8967 3.04018 13.989 2.25 11.9999 2.25C10.0108 2.25 8.10311 3.04018 6.69659 4.4467C5.29007 5.85322 4.49989 7.76088 4.49989 9.75C4.49989 13.0631 3.72551 15.5981 3.2052 16.4944C3.07233 16.7222 3.00189 16.9811 3.00099 17.2449C3.00008 17.5086 3.06874 17.768 3.20005 17.9967C3.33135 18.2255 3.52065 18.4156 3.74886 18.5478C3.97708 18.6801 4.23613 18.7498 4.49989 18.75H19.4999C19.7636 18.7496 20.0225 18.6798 20.2506 18.5475C20.4787 18.4151 20.6678 18.225 20.799 17.9963C20.9302 17.7676 20.9988 17.5083 20.9979 17.2446C20.9969 16.9809 20.9265 16.7222 20.7936 16.4944H20.7946Z"
					fill="#E4B33D"
				/>
			</svg>
		),
	},
	{
		label: "Help",
		icon: (
			<svg
				xmlns="http://www.w3.org/2000/svg"
				width="24"
				height="24"
				viewBox="0 0 24 24"
				fill="none"
			>
				<path
					d="M12 2.25C10.0716 2.25 8.18657 2.82183 6.58319 3.89317C4.97982 4.96451 3.73013 6.48726 2.99218 8.26884C2.25422 10.0504 2.06114 12.0108 2.43735 13.9021C2.81355 15.7934 3.74215 17.5307 5.10571 18.8943C6.46928 20.2579 8.20656 21.1865 10.0979 21.5627C11.9892 21.9389 13.9496 21.7458 15.7312 21.0078C17.5127 20.2699 19.0355 19.0202 20.1068 17.4168C21.1782 15.8134 21.75 13.9284 21.75 12C21.7473 9.41498 20.7192 6.93661 18.8913 5.10872C17.0634 3.28084 14.585 2.25273 12 2.25ZM12 18C11.7775 18 11.56 17.934 11.375 17.8104C11.19 17.6868 11.0458 17.5111 10.9606 17.3055C10.8755 17.1 10.8532 16.8738 10.8966 16.6555C10.94 16.4373 11.0472 16.2368 11.2045 16.0795C11.3618 15.9222 11.5623 15.815 11.7805 15.7716C11.9988 15.7282 12.225 15.7505 12.4305 15.8356C12.6361 15.9208 12.8118 16.065 12.9354 16.25C13.059 16.435 13.125 16.6525 13.125 16.875C13.125 17.1734 13.0065 17.4595 12.7955 17.6705C12.5845 17.8815 12.2984 18 12 18ZM12.75 13.4325V13.5C12.75 13.6989 12.671 13.8897 12.5303 14.0303C12.3897 14.171 12.1989 14.25 12 14.25C11.8011 14.25 11.6103 14.171 11.4697 14.0303C11.329 13.8897 11.25 13.6989 11.25 13.5V12.75C11.25 12.5511 11.329 12.3603 11.4697 12.2197C11.6103 12.079 11.8011 12 12 12C13.2403 12 14.25 11.1562 14.25 10.125C14.25 9.09375 13.2403 8.25 12 8.25C10.7597 8.25 9.75 9.09375 9.75 10.125V10.5C9.75 10.6989 9.67099 10.8897 9.53033 11.0303C9.38968 11.171 9.19892 11.25 9 11.25C8.80109 11.25 8.61033 11.171 8.46967 11.0303C8.32902 10.8897 8.25 10.6989 8.25 10.5V10.125C8.25 8.26406 9.93188 6.75 12 6.75C14.0681 6.75 15.75 8.26406 15.75 10.125C15.75 11.7544 14.46 13.1184 12.75 13.4325Z"
					fill="#E4B33D"
				/>
			</svg>
		),
	},
];

function formatDate(date: Date) {
	const d = new Date(date);
	const day = d.getDate().toString().padStart(2, "0");
	const month = d.toLocaleString("en-GB", { month: "short" });
	const year = d.getFullYear();
	const time = d.toLocaleTimeString("en-GB", {
		hour: "2-digit",
		minute: "2-digit",
		hour12: false,
	});
	return `${day} ${month} ${year}, ${time}`;
}

function getTransactionIcon(type: string) {
	switch (type) {
		case "withdrawal":
			return <ArrowDown className="w-5 h-5 text-[#211E1E] dark:text-white" />;
		case "topup":
			return <ArrowUp className="w-5 h-5 text-[#211E1E] dark:text-white" />;
		case "transfer":
			return (
				<ArrowRightLeft className="w-5 h-5 text-[#211E1E] dark:text-white" />
			);
		default:
			return null;
	}
}

function getTransactionLabel(type: string) {
	switch (type) {
		case "withdrawal":
			return "Withdrawal";
		case "topup":
			return "Top up";
		case "transfer":
			return "Transfer";
		default:
			return type;
	}
}

const Budgeting: React.FC = () => {
	const navigate = useNavigate();
	const { accounts, transactions } = useAccounts();
	const [selectedAccount, setSelectedAccount] = useState<
		"savings" | "currentAccount"
	>("currentAccount");

	const currentCategories = budgetCategories[selectedAccount];
	const account = accounts[selectedAccount];

	const filteredTransactions = transactions
		.filter((t) => t.account === selectedAccount)
		.sort((a, b) => b.date.getTime() - a.date.getTime())
		.slice(0, 5);

	// Prepare chart data and config
	const chartData = currentCategories.map((cat, index) => ({
		category: cat.name,
		amount: cat.spent,
		fill: cat.color,
	}));

	const totalSpent = currentCategories.reduce((sum, cat) => sum + cat.spent, 0);

	const chartConfig: ChartConfig = currentCategories.reduce((config, cat) => {
		config[cat.id] = {
			label: cat.name,
			color: cat.color,
		};
		return config;
	}, {} as ChartConfig);

	return (
		<div className="min-h-screen bg-[#F3F3F3] dark:bg-black text-foreground max-w-[480px] mx-auto flex flex-col pb-[100px]">
			<div className="px-4 py-6 flex flex-col flex-1">
				{/* Header */}
				<div className="flex items-center justify-between mb-2">
					<h1 className="text-[28px] font-normal text-foreground">
						Budgeting
					</h1>
					<button
						className="w-12 h-12 rounded-full bg-white dark:bg-[#211E1E] flex items-center justify-center"
						onClick={() => {
							/* Settings action */
						}}
					>
						<Settings className="w-5 h-5 text-foreground" />
					</button>
				</div>

				{/* Subtitle */}
				<p className="text-base text-muted-foreground mb-6">
					Set targets for saving categories so you can 
          keep track of your spending.
				</p>

				{/* Account Dropdown */}
				<Select
					value={selectedAccount}
					onValueChange={(value) =>
						setSelectedAccount(value as "savings" | "currentAccount")
					}
				>
					<SelectTrigger className="w-full mb-3 bg-white dark:bg-[#211E1E] h-20 [&>span]:pointer-events-auto">
						<SelectValue>
							<div className="flex items-center justify-between w-full gap-4">
								{/* Left side - Icon and Account info */}
								<div className="flex items-center gap-3">
									<div
										className="w-12 h-12 flex items-center justify-center rounded-lg bg-black text-3xl"
										style={{
											color: account.color,
											lineHeight: 1,
										}}
									>
										{account.icon}
									</div>
									<div className="flex flex-col items-start">
										<span className="text-base text-muted-foreground">
											Account
										</span>
										<span className="text-foreground text-base">
											{account.name}
										</span>
									</div>
								</div>

								{/* Right side - Balance info */}
								<div className="flex flex-col items-end">
									<span className="text-base text-muted-foreground">Balance</span>
									<span className="text-xl text-foreground">
										{formatCurrency(account.balance)}
									</span>
								</div>
							</div>
						</SelectValue>
					</SelectTrigger>
					<SelectContent className="bg-white dark:bg-[#211E1E] border-border z-50">
						<SelectItem value="savings">
							<div className="flex items-center gap-3">
								<div
									className="w-10 h-10 flex items-center justify-center rounded-[4px] bg-black text-2xl"
									style={{ color: accounts.savings.color }}
								>
									{accounts.savings.icon}
								</div>
								<div className="flex flex-col items-start">
									<span className="text-base font-normal">Savings account</span>
									<span className="text-xl text-muted-foreground">
										{formatCurrency(accounts.savings.balance)}
									</span>
								</div>
							</div>
						</SelectItem>
						<SelectItem value="currentAccount">
							<div className="flex items-center gap-3">
								<div
									className="w-10 h-10 flex items-center justify-center rounded-[4px] bg-black text-2xl"
									style={{ color: accounts.currentAccount.color }}
								>
									{accounts.currentAccount.icon}
								</div>
								<div className="flex flex-col items-start">
									<span className="text-base font-normal">Current account</span>
									<span className="text-xl text-muted-foreground">
										{formatCurrency(accounts.currentAccount.balance)}
									</span>
								</div>
							</div>
						</SelectItem>
					</SelectContent>
				</Select>

				{/* Actions Section */}
				<div className="mb-6 mt-2">
          <h2 className="text-lg font-normal text-foreground mb-4">
							Actions
					</h2>
					<AccountActions
						actions={
							selectedAccount === "savings"
								? savingsActions
								: currentAccountActions
						}
					/>
				</div>

				{/* Categories Section */}
				<div className="mb-3">
					<div className="flex items-center justify-between mb-4">
						<h2 className="text-lg font-normal text-foreground">
							Categories
						</h2>
						<button className="text-sm text-[#A488F5] font-normal">Edit</button>
					</div>

					<div className="flex gap-4 overflow-x-auto pb-2 -mx-4 px-4 scrollbar-hide">
						{currentCategories.map((category) => {
							const percentage = (category.spent / category.target) * 100;
							return (
								<div
									key={category.id}
									className="min-w-[280px] bg-white dark:bg-[#211E1E] rounded-lg p-4"
								>
									<div className="flex items-start justify-between mb-5">
										<div className="flex items-center gap-3">
											<div
												className="w-10 h-10 rounded-lg flex items-center justify-center text-white"
												style={{ backgroundColor: category.color }}
											>
												{category.icon}
											</div>
											<div>
												<h3 className="text-xl font-normal text-foreground">
													{category.name}
												</h3>
												<p className="text-sm text-muted-foreground">
													{category.date}
												</p>
											</div>
										</div>
									</div>

									<div className="flex items-center justify-between text-sm mb-3">
										<span className="text-xl text-muted-foreground">
											<span style={{ color: account.color }}>
												{formatCurrency(category.spent)}
											</span>{" "}
											/ {formatCurrency(category.target)}
										</span>
										{/* <span className="font-normal text-foreground">
											{percentage.toFixed(0)}%
										</span> */}
									</div>

                  <Progress
										value={percentage}
										className="mb-2 h-1"
										style={{
											["--progress-background" as any]: category.color,
											backgroundColor: "#D9D9D9",
										}}
									/>

								</div>
							);
						})}
					</div>
				</div>

				{/* Chart Section */}
				<div className="bg-white dark:bg-[#211E1E] rounded-lg p-6 mb-6">
					<h2 className="text-lg font-normal text-foreground mb-4">
						Saving by category
					</h2>
					<ChartContainer
						config={chartConfig}
						className="mx-auto aspect-square max-h-[250px]"
					>
						<PieChart>
							<Pie
								data={chartData}
								dataKey="amount"
								nameKey="category"
								innerRadius={70}
								strokeWidth={3}
							>
								<Label
									content={({ viewBox }) => {
										if (viewBox && "cx" in viewBox && "cy" in viewBox) {
											return (
												<text x={viewBox.cx} y={viewBox.cy} textAnchor="middle">
													<tspan
														x={viewBox.cx}
														y={(viewBox.cy || 0) - 8}
														className="fill-muted-foreground text-xl"
													>
														Total spending
													</tspan>
													<tspan
														x={viewBox.cx}
														y={(viewBox.cy || 0) + 18}
														className="fill-foreground text-2xl font-normal"
													>
														{formatCurrency(totalSpent)}
													</tspan>
												</text>
											);
										}
									}}
								/>
							</Pie>
						</PieChart>
					</ChartContainer>

					{/* Legend */}
					<div className="flex flex-col gap-2 mt-4">
						{currentCategories.map((cat) => (
							<div key={cat.id} className="flex items-center justify-between">
								<div className="flex items-center gap-2">
									<div
										className="w-3 h-3 rounded-full"
										style={{ backgroundColor: cat.color }}
									/>
									<span className="text-sm text-foreground">{cat.name}</span>
								</div>
								<span className="text-sm font-normal text-foreground">
									{formatCurrency(cat.spent)}
								</span>
							</div>
						))}
					</div>
				</div>

				{/* Transactions Section */}
				<div>
					<div className="flex items-center justify-between mb-4">
						<h2 className="text-xl font-normal text-foreground">
							Transactions
						</h2>
						<button
							className="text-sm text-[#A488F5] font-normal self-stretch flex items-center gap-1"
							onClick={() => navigate("/transactions")}
						>
              <span className="text-[#A488F5] self-stretch my-auto text-lg">See all</span>
              <img
                src="https://api.builder.io/api/v1/image/assets/TEMP/c7bef006abc66b8f7fa6574d6a4853ed2994e5d2?placeholderIfAbsent=true"
                className="aspect-[1] object-contain w-5 self-stretch shrink-0 my-auto"
                alt=""
              />
						</button>
					</div>

					{filteredTransactions.length === 0 ? (
						<div className="text-center py-8 text-muted-foreground">
							No transactions yet
						</div>
					) : (
						<div className="">
							{filteredTransactions.map((transaction) => (
								<div
									key={transaction.id}
									className="flex items-center gap-4 py-[12px] border-b border-[#E5E5EA] dark:border-[#2C2C2E] cursor-pointer hover:bg-[#E5E5EA] dark:hover:bg-[#1C1C1E]/30 transition-colors"
									onClick={() => {
										/* Could navigate to transaction detail */
									}}
								>
									<div className="w-12 h-12 rounded-lg bg-white dark:bg-[#2C2C2E] flex items-center justify-center flex-shrink-0">
										{getTransactionIcon(transaction.type)}
									</div>
									<div className="flex-1 min-w-0">
										<div className="text-foreground text-xl font-normal">
											{getTransactionLabel(transaction.type)}
										</div>
										<div className="text-[#8E8E93] text-base">
											{formatDate(transaction.date)}
										</div>
									</div>
									<div
										className={`text-xl font-normal ${
											transaction.amount >= 0
												? "text-[#34C759]"
												: "text-foreground"
										}`}
									>
										{transaction.amount >= 0 ? "+ " : "- "}£{" "}
										{Math.abs(transaction.amount).toFixed(2)}
									</div>
								</div>
							))}
						</div>
					)}
				</div>
				<div className="fixed bottom-0 left-0 right-0 max-w-[480px] mx-auto">
					<BottomNavigation />
				</div>
			</div>
		</div>
	);
};

export default Budgeting;
